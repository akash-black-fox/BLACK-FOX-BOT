module.exports.config = {
  name: 'friend',
  aliases: ['addfriend', 'addfr'],
  version: '1.0.0',
  author: 'AKASH HASAN',
  description: 'Send friend request to a user',
  usage: 'friend [uid]',
  category: 'Friend',
  adminOnly: true,
  prefix: true
};

module.exports.run = async function({ api, event, args, send, config, Users }) {
  const { senderID } = event;
  
  if (!config.ADMINBOT.includes(senderID)) {
    return send.reply(`â•­â”€â”€â”€ã€Œ â›” ğƒğ„ğğˆğ„ğƒ ã€â”€â”€â”€â•®
â”‚
â”‚ âš ï¸ à¦à¦‡à¦Ÿà¦¾ à¦¶à§à¦§à§ à¦¬à¦¸ à¦†à¦•à¦¾à¦¶à§‡à¦°
â”‚    à¦œà¦¨à§à¦¯...!!
â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯`);
  }
  
  let uid = args[0];
  
  if (!uid) {
    return send.reply(`â•­â”€â”€â”€ã€Œ âš ï¸ ğ–ğ€ğ‘ğğˆğğ† ã€â”€â”€â”€â•®
â”‚
â”‚ âŒ à¦†à¦°à§‡ à¦­à¦¾à¦‡ à¦•à¦¾à¦•à§‡ à¦°à¦¿à¦•à§‹à§Ÿà§‡à¦¸à§à¦Ÿ
â”‚    à¦¦à¦¿à¦¬à§‹? UID à¦¦à§‡ à¦†à¦—à§‡! ğŸ™„
â”‚
â”‚ ğŸ‘‰ friend [UID]
â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯`);
  }
  
  if (uid.includes('facebook.com')) {
    const match = uid.match(/(?:id=|profile\.php\?id=|facebook\.com\/)(\d+)/);
    if (match && match[1]) {
      uid = match[1];
    } else {
      return send.reply(`â•­â”€â”€â”€ã€Œ âŒ ğ„ğ‘ğ‘ğğ‘ ã€â”€â”€â”€â•®
â”‚
â”‚ âš ï¸ à¦²à¦¿à¦‚à¦• à¦¥à§‡à¦•à§‡ UID à¦ªà¦¾à¦šà§à¦›à¦¿ à¦¨à¦¾!
â”‚ ğŸ”§ à¦¦à§Ÿà¦¾ à¦•à¦°à§‡ à¦¶à§à¦§à§ UID à¦¦à§‡à¦¨à¥¤
â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯`);
    }
  }
  
  if (!/^\d+$/.test(uid)) {
    return send.reply(`â•­â”€â”€â”€ã€Œ âš ï¸ ğ„ğ‘ğ‘ğğ‘ ğ”ğˆğƒ ã€â”€â”€â”€â•®
â”‚
â”‚ âŒ à¦‰à¦²à§à¦Ÿà¦¾à¦ªà¦¾à¦²à§à¦Ÿà¦¾ UID à¦¦à¦¿à¦¸ à¦¨à¦¾!
â”‚ ğŸ”¢ à¦¸à¦ à¦¿à¦• à¦¨à¦¾à¦®à§à¦¬à¦¾à¦° à¦¦à§‡à¥¤
â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯`);
  }
  
  try {
    let name = 'Unknown User';
    try {
      name = await Users.getNameUser(uid);
    } catch {}
    
    await api.addUserToFriends(uid);
    
    return send.reply(`â•­â”€â”€â”€ã€Œ âœ… ğ‘ğ„ğğ”ğ„ğ’ğ“ ğ’ğ„ğğ“ ã€â”€â”€â”€â•®
â”‚
â”‚ ğŸ‘¤ ğğšğ¦ğ : ${name}
â”‚ ğŸ†” ğ”ğˆğƒ  : ${uid}
â”‚ ğŸ“¨ ğ’ğ­ğšğ­ğ®ğ¬ : Sent Successfully
â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯`);

  } catch (error) {
    return send.reply(`â•­â”€â”€â”€ã€Œ âŒ ğ…ğ€ğˆğ‹ğ„ğƒ ã€â”€â”€â”€â•®
â”‚
â”‚ âš ï¸ à¦°à¦¿à¦•à§‹à§Ÿà§‡à¦¸à§à¦Ÿ à¦¯à¦¾à§Ÿà¦¨à¦¿ à¦°à§‡ à¦­à¦¾à¦‡!
â”‚ ğŸ”§ à¦†à¦‡à¦¡à¦¿ à¦¬à§à¦²à¦• à¦¬à¦¾ à¦ªà§à¦°à¦¾à¦‡à¦­à§‡à¦¸à¦¿
â”‚    à¦¥à¦¾à¦•à¦¤à§‡ à¦ªà¦¾à¦°à§‡...!! ğŸ˜¿
â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯`);
  }
};